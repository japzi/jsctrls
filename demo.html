
<!--
  Copyright 2010-2011 Ruwan J Egoda Gamage

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
<html lang="en"> 
    <head> 
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
        <title>Raphaël · Gauges</title> 
        <link rel="stylesheet" href="demo/css/demo.css" type="text/css" media="screen"> 
        <link rel="stylesheet" href="demo/css/demo-print.css" type="text/css" media="print"> 
        <link rel="stylesheet" href="demo/css/jquery-ui-1.8.1.custom.css" type="text/css"> 

        <script src="depends/raphael.js" type="text/javascript" charset="utf-8"></script> 
        <script src="demo/js/jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"></script> 
        <script src="demo/js/jquery-ui-1.8.1.custom.min.js" type="text/javascript" charset="utf-8"></script> 
        <script src="jsctrls.js" type="text/javascript" charset="utf-8"></script> 
        <script type="text/javascript" charset="utf-8"> 
			var label1 = null, label2 = null, label3 = null, label4 = null;	
			var optsKnob5 = ["IN", "CA", "TN", "WA", "NJ"];
			var timer;
			var r;

			function onKnobChange1(val) {label1.update(val != 0? Math.round(val) : "0");}		
			function onKnobChange2(val) {label2.update(val != 0? Math.round(val) : "0");}			
			function onKnobChange3(val) {label3.update(val != 0? Math.round(val) : "0");}			
			function onKnobChange4(val) {label4.update(val != 0? Math.round(val) : "0");}			
			function onKnobChange5(val) {label5.update(optsKnob5[Math.round(val)]);}
			
			function drawKnobs(r, offsetX, offsetY) {
				var k1, k2, k3, k4;
				new jsctrls.Label() .text("KNOBS") .fontsize(20) .create(r, offsetX + 280, offsetY + 20); 
				
				k1 = new jsctrls.Knob() .dialRadius(40) .smallTick(10) .largeTick(10) .minVal(0) .maxVal(100) 
  										      .snap(true) .create(r, offsetX + 80, offsetY + 120);
				k1.onChange = onKnobChange1;				
				label1 = new jsctrls.Label() .text("0") .create(r, offsetX + 80, offsetY + 200);
				
				k2 = new jsctrls.Knob() .dialRadius(40) .smallTick(4) .largeTick(20) .minVal(-100) .maxVal(100) 
									 	      .startVal(0) .snap(false) .create(r, offsetX + 260, offsetY + 120);
				k2.onChange = onKnobChange2;
				label2 = new jsctrls.Label() .text("0") .create(r, offsetX + 260, offsetY + 200);
												
				k3 = new jsctrls.Knob() .dialRadius(30) .smallTick(1) .largeTick(1) 
										 	  .minVal(0) .maxVal(4) .minAngle(135) .maxAngle(225) 
										 	  .snap(true) .create(r, offsetX + 80, offsetY + 320);
				k3.onChange = onKnobChange3;
				label3 = new jsctrls.Label() .text("0") .create(r, offsetX + 80, offsetY + 360);
				
				k4 = new jsctrls.Knob() .dialRadius(30) .smallTick(5) .largeTick(10) 
										 	  .minVal(30) .maxVal(80)  .minAngle(135) .maxAngle(225) 
										 	  .snap(false) .create(r, offsetX + 260, offsetY + 320);
				k4.onChange = onKnobChange4;		
				label4 = new jsctrls.Label() .text("30") .create(r, offsetX + 260, offsetY + 360);
				
				k5 = new jsctrls.Knob() .dialRadius(40) .minAngle(210) .maxAngle(330) 
										 	  .selectOpts(optsKnob5) .create(r, offsetX + 500, offsetY + 220);
				k5.onChange = onKnobChange5;		
				label5 = new jsctrls.Label() .text("WSAS") .create(r, offsetX + 500, offsetY + 300);
			}
			
			function drawCircularGauges(r, offsetX, offsetY) {
				var g1, g2, g3, g5;			
				
				function globalTick() {
					var minVal = 0, maxVal = 100;
					var val = Math.floor(minVal + Math.random() * (maxVal - minVal))
					g1.setValue(val);
					g2.setValue(val);
					g3.setValue(val/25);
					g4.setValue(50 - val);
					g5.setValue(val/25);
				};
				
				new jsctrls.Label() .text("CIRCULAR GAUGES") .fontsize(20) .create(r, offsetX + 370, offsetY + 20); 
				
				g1 = new jsctrls.CGauge() .dialRadius(100) .smallTick(1) .largeTick(10) .minVal(0) .maxVal(100) 
												.ltlen(18) .stlen(15) .needleCenterRadius(10) .needleBottom(20)
												.labelOffset(15) .labelFontSize(15)
  										        .create(r, offsetX + 160, offsetY + 200);
											  
				g2 = new jsctrls.CGauge() .dialRadius(60) .smallTick(4) .largeTick(20) .minVal(0) .maxVal(100)
												.minAngle(90) .maxAngle(270) 
  										      .create(r, offsetX + 400, offsetY + 150);
											  
				g4 = new jsctrls.CGauge() .dialRadius(60) .smallTick(5) .largeTick(10) 
										 	  .minVal(-50) .maxVal(50)  .minAngle(100) .maxAngle(260) 
											  .create(r, offsetX + 400, offsetY + 300);								  
											  
				g3 = new jsctrls.CGauge() .dialRadius(30) .smallTick(0.5) .largeTick(1) 
										 	  .minVal(0) .maxVal(4) .minAngle(135) .maxAngle(225) 
											  .needleLength(28) .needleCenterRadius(1) .needleBottom(8) .ltlen(4) .stlen(4)
										 	  .create(r, offsetX + 600, offsetY + 180);	

				g5 = new jsctrls.CGauge() .dialRadius(30) .smallTick(0.5) .largeTick(1) 
										 	  .minVal(0) .maxVal(4) .minAngle(225) .maxAngle(315) 
											  .needleLength(28) .needleCenterRadius(1) .needleBottom(8) .ltlen(4) .stlen(4)
										 	  .create(r, offsetX + 620, offsetY + 200);															  																			
				
				globalTick();
				
				timer = setInterval(globalTick, 2000);
			}
			
			function drawLinearGauges(r, offsetX, offsetY) {
				var g1, g2, g3, g5;		
				var ledarrays = [];	
				var l1;
				
				function globalTick() {
					var minVal = 0, maxVal = 100, total = 0, temp = 0;
					for (var i = 0; i < 5; i++) {
						var val = Math.floor(minVal + Math.random() * (maxVal - minVal))
                		ledarrays[i].update(val);
						total += (100 - val);
					}
					g1.setValue(total);
				};
				
				new jsctrls.Label() .text("LINEAR GAUGES") .fontsize(20) .create(r, offsetX + 310, offsetY + 20); 
				new jsctrls.Label() .text("TOTAL REQUEST COUNT - ALL SERVERS") .fontsize(12) .create(r, offsetX + 310, offsetY + 80); 
				g1 = new jsctrls.LGauge() .dialRadius(100) .minVal(0) .maxVal(500) 												
												.create(r, offsetX + 160, offsetY + 140);
				l1 = new jsctrls.Label() .text("100") .fontsize(12) .align("start") .create(r, offsetX + 410, offsetY + 250); 
				l2 = new jsctrls.Label() .text("0") .fontsize(12) .align("start") .create(r, offsetX + 410, offsetY + 445); 
				new jsctrls.Label() .text("REQUEST COUNT - EACH SERVER") .fontsize(12) .create(r, offsetX + 310, offsetY + 210); 
				ledarrays[0] = new jsctrls.LEDArray() .length(200) .count(20) .min(0) .max(100) .create(r, offsetX + 220, offsetY + 240); 
				ledarrays[1] = new jsctrls.LEDArray() .length(200) .count(20) .min(0) .max(100) .create(r, offsetX + 260, offsetY + 240);
				ledarrays[2] = new jsctrls.LEDArray() .length(200) .count(20) .min(0) .max(100) .create(r, offsetX + 300, offsetY + 240);
				ledarrays[3] = new jsctrls.LEDArray() .length(200) .count(20) .min(0) .max(100) .create(r, offsetX + 340, offsetY + 240);
				ledarrays[4] = new jsctrls.LEDArray() .length(200) .count(20) .min(0) .max(100) .create(r, offsetX + 380, offsetY + 240);
				
				new jsctrls.Label() .text("173.23.233.42") .fontsize(12) .rotation(270) .align("end") .create(r, offsetX + 230, offsetY + 470); 
				new jsctrls.Label() .text("188.238.23.34") .fontsize(12) .rotation(270) .align("end") .create(r, offsetX + 270, offsetY + 470); 
				new jsctrls.Label() .text("245.234.233.52") .fontsize(12) .rotation(270) .align("end") .create(r, offsetX + 310, offsetY + 470); 
				new jsctrls.Label() .text("178.39.48.34") .fontsize(12) .rotation(270) .align("end") .create(r, offsetX + 350, offsetY + 470); 
				new jsctrls.Label() .text("67.34.75.34") .fontsize(12) .rotation(270) .align("end") .create(r, offsetX + 390, offsetY + 470); 
				
				globalTick();
				
				timer = setInterval(globalTick, 2000);
			}
			
			function drawButtonNSevenSegment(r, offsetX, offsetY) {
				var ssegs1, ssegs2; 
				var btn1;
				var onFlag = true;	
				var val = 0;
				var count = 0;
				var leds = [];
				var currLED = 0;
			
				function onButton () {
					if (onFlag) {
						btn1.status(0);
						clearInterval(timer);
					}
					else { 
						btn1.status(1);
						timer = setInterval(globalTick, 10);
					}
					onFlag = !onFlag;				
				}
				
				function globalTick() {
					
					if (count % 10 == 0) {
						if (currLED == 4) {							
							currLED = 0;
							leds[0].lit(true);
							leds[4].lit(false);
						}
						else { 							
							leds[currLED].lit(false);
							currLED += 1;
							leds[currLED].lit(true);
						}
					}
					
					ssegs2.setValue(val);
					val += 0.01;					
					count += 1;
				};
				
				new jsctrls.Label() .text("BUTTONS, LEDs & SEVEN SEGMENT DISPLAY") .fontsize(20) .create(r, offsetX + 480, offsetY + 20); 
				new jsctrls.Label() .text("BUTTON WITH LED DEMO - PAUSE/RESUME") .fontsize(12) .create(r, offsetX + 480, offsetY + 330);				
				new jsctrls.Label() .text("LEDS - BLUE, YELLOW, PURPLE, GREEN, RED") .fontsize(12) .create(r, offsetX + 480, offsetY + 560);
				
				ssegs1 = new jsctrls.SSegArray() .initialValue(12345678.90) .count(10) .scale(0.7) .create(r, offsetX + 900, offsetY + 100);				
 				btn1 = new jsctrls.Button() .text("TIMER") .ledspacing(17) .create(r, offsetX + 270, offsetY + 406); btn1.status(1); 
				ssegs2 = new jsctrls.SSegArray() .initialValue(0.00) .count(6) .scale(0.4) .create(r, offsetX + 670, offsetY + 380);				
				leds[2] = new jsctrls.LED() .color("blue") .create(r, offsetX + 380, offsetY + 600); 
				leds[3] = new jsctrls.LED() .color("yellow") .create(r, offsetX + 420, offsetY + 600); 
				leds[4] = new jsctrls.LED() .color("purple") .create(r, offsetX + 460, offsetY + 600); 
				leds[0] = new jsctrls.LED() .color("green") .create(r, offsetX + 500, offsetY + 600); 
				leds[1] = new jsctrls.LED() .color("red") .create(r, offsetX + 540, offsetY + 600); 
				
				btn1.onButton = onButton;				
				
				timer = setInterval(globalTick, 50);
			}
			
			function clearAll() {
				r.clear();
				clearInterval(timer);
			}
			
			window.onload = function () {
				r = Raphael("holder", 1024, 800);
				
				//drawKnobs(r, 0, 0);
				//drawCircularGauges(r, 0, 0);
				//drawLinearGauges(r, 0, 0);
				//drawButtonNSevenSegment(r, 0, 0);
				$(function() {
					$("#tabs").tabs();
				});
				$('#tabs').bind('tabsselect', function(event, ui) {
					// Objects available in the function context:
					//ui.tab     // anchor element of the selected (clicked) tab
					//ui.panel   // element, that contains the selected/clicked tab contents
					//ui.index   // zero-based index of the selected (clicked) tab
					clearAll();
					if (ui.index == 0) {
						drawCircularGauges(r, 0, 0);
					}
					else if (ui.index == 1) {
						drawKnobs(r, 0, 0);
					}
					else if (ui.index == 2) {
						drawLinearGauges(r, 0, 0);
					}
					else if (ui.index == 3) {
						drawButtonNSevenSegment(r, 0, 0);
					}
				});
				drawCircularGauges(r, 0, 0);
			};
        </script> 
    </head> 
    <body> 
    	<div><h2>JSCtrls Library</h2></div>
		<div id="tabs">
           <ul>
              <li><a href="#tabs-1">Circular Gauges</a></li>
              <li><a href="#tabs-2">Knobs</a></li>
              <li><a href="#tabs-3">Linear Gauges</a></li>
              <li><a href="#tabs-4">Buttons, LEDs and Seven Segment Display</a></li>
           </ul>
           <div id="tabs-1">
              <p>Different configurations of jsctrls circular gauge. In this demo, a timer sets different values to each gauge. </p>
           </div>
           <div id="tabs-2">
              <p><strong>Drag on each knob to rotate.</strong> <br/> <br/>  Callbacks update corresponding label.  Some knobs has snap = true. <br/><br/> </p>
           </div>
           <div id="tabs-3">
              <p>Green, Red and Yellow zones are configurable in LEDArrays found in the bottom.</p>
           </div>
           <div id="tabs-4">
           	  <p>Press the "TIMER" button to PAUSE/RESUME</p>              
           </div>
        </div>
         <div id="holder" style="height:300px;float:left; position:absolute; "></div>
        <p id="copy"></p> 
		
    </body> 
</html> 
